{"posts":[{"title":"绕过系统代理使用 Python requests.XXX","content":"bypass_systemProxy={&quot;http&quot;:None,&quot;https&quot;:None}requests.get(&quot;https://azwhikaru.github.io/&quot;,proxies=bypass_systemProxy)","link":"https://note.teio.tk/5q2pN37YI/"},{"title":"Android 原生样式加载框","content":"全局变量privateProgressDialogprogressDialog;显示publicvoidshowProgressDialog(StringTitle,StringMessage){progressDialog=newProgressDialog(this);progressDialog.setTitle(Title);progressDialog.setMessage(Message);progressDialog.setCancelable(false);progressDialog.show();}销毁progressDialog.cancel();","link":"https://note.teio.tk/HN4OWCD1g/"},{"title":"在 WebView 中获取网页内容 (HTML 代码)","content":"在Layout中创建一个WebView在调用WebView的方法前加@SuppressLint({&quot;JavascriptInterface&quot;,&quot;SetJavaScriptEnabled&quot;,&quot;AddJavascriptInterface&quot;})WebViewwebView;调用WebViewwebView=(WebView)findViewById(R.id.webview);webView.getSettings().setJavaScriptEnabled(true);webView.addJavascriptInterface(newInJavaScriptLocalObj(),&quot;local_obj&quot;);webView.setWebViewClient(newMyWebViewClient());webView.loadUrl(&quot;https://azwhikaru.github.io/&quot;);调用WebViewClientfinalclassMyWebViewClientextendsWebViewClient{publicbooleanshouldOverrideUrlLoading(WebViewview,Stringurl){view.loadUrl(url);returntrue;}publicvoidonPageStarted(WebViewview,Stringurl,Bitmapfavicon){Log.d(&quot;WebView&quot;,&quot;onPageStarted&quot;);super.onPageStarted(view,url,favicon);}publicvoidonPageFinished(WebViewview,Stringurl){Log.d(&quot;WebView&quot;,&quot;onPageFinished&quot;);view.loadUrl(&quot;javascript:window.local_obj.showSource('&lt;head&gt;'+&quot;+&quot;document.getElementsByTagName('html')[0].innerHTML+'&lt;/head&gt;');&quot;);super.onPageFinished(view,url);}}打印源码finalclassInJavaScriptLocalObj{@JavascriptInterface@SuppressWarnings(&quot;unused&quot;)publicvoidshowSource(Stringhtml){Log.d(&quot;HTML&quot;,html);}}完整代码publicclassMainActivityextendsAppCompatActivity{@SuppressLint({&quot;JavascriptInterface&quot;,&quot;SetJavaScriptEnabled&quot;,&quot;AddJavascriptInterface&quot;})WebViewwebView;@OverrideprotectedvoidonCreate(BundlesavedInstanceState){super.onCreate(savedInstanceState);setContentView(R.layout.first_activity);webView=(WebView)findViewById(R.id.webview);webView.getSettings().setJavaScriptEnabled(true);webView.addJavascriptInterface(newInJavaScriptLocalObj(),&quot;local_obj&quot;);webView.setWebViewClient(newMyWebViewClient());webView.loadUrl(&quot;https://azwhikaru.github.io/&quot;);}finalclassMyWebViewClientextendsWebViewClient{publicbooleanshouldOverrideUrlLoading(WebViewview,Stringurl){view.loadUrl(url);returntrue;}publicvoidonPageStarted(WebViewview,Stringurl,Bitmapfavicon){Log.d(&quot;WebView&quot;,&quot;onPageStarted&quot;);super.onPageStarted(view,url,favicon);}publicvoidonPageFinished(WebViewview,Stringurl){Log.d(&quot;WebView&quot;,&quot;onPageFinished&quot;);view.loadUrl(&quot;javascript:window.local_obj.showSource('&lt;head&gt;'+&quot;+&quot;document.getElementsByTagName('html')[0].innerHTML+'&lt;/head&gt;');&quot;);super.onPageFinished(view,url);}}finalclassInJavaScriptLocalObj{@JavascriptInterface@SuppressWarnings(&quot;unused&quot;)publicvoidshowSource(Stringhtml){Log.d(&quot;HTML&quot;,html);}}}","link":"https://note.teio.tk/vF9bpMdsd/"},{"title":"在 Android 9.0 + 使用 HTTP 请求","content":"为了安全，在Android9.0+之后Google禁止了所有非HTTPS请求。会报错notpermitted直接在AndroidManifest.xml的&lt;application&gt;里插入android:usesCleartextTraffic=&quot;true&quot;就可以正常使用非HTTPS请求了","link":"https://note.teio.tk/wD98AVhHn/"},{"title":"在 Android 6.0 + 实现动态申请权限","content":"在AndroidManifest.xml定义所需权限&lt;uses-permissionandroid:name=&quot;android.permission.ACCESS_WIFI_STATE&quot;/&gt;&lt;uses-permissionandroid:name=&quot;android.permission.CHANGE_WIFI_STATE&quot;/&gt;&lt;uses-permissionandroid:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot;/&gt;&lt;uses-permissionandroid:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot;/&gt;然后在启动Activity创建变量，其中字符串数组内为需要的所有权限privatestaticfinalString[]REQUEST_PERMISSIONS={Manifest.permission.ACCESS_WIFI_STATE,Manifest.permission.CHANGE_WIFI_STATE,Manifest.permission.ACCESS_COARSE_LOCATION,Manifest.permission.ACCESS_FINE_LOCATION};privatestaticfinalintREQUEST_PERMISSIONS_CODE=1;请求权限privatevoidgetRequestPermission(){if(Build.VERSION.SDK_INT&gt;=Build.VERSION_CODES.M){ActivityCompat.requestPermissions(MainActivity.this,REQUEST_PERMISSIONS,REQUEST_PERMISSIONS_CODE);}}//API是否高于Android6.0（需要动态申请）@OverridepublicvoidonRequestPermissionsResult(intrequestCode,@NonNullString[]permissions,@NonNullint[]grantResults){super.onRequestPermissionsResult(requestCode,permissions,grantResults);switch(requestCode){caseREQUEST_PERMISSIONS_CODE://第一次权限请求失败if(grantResults.length==REQUEST_PERMISSIONS.length){for(intresult:grantResults){if(result!=PackageManager.PERMISSION_GRANTED){//弹出对话框引导设置showDialog();Toast.makeText(MainActivity.this,&quot;请求权限被拒绝&quot;,Toast.LENGTH_LONG).show();break;}}}else{Toast.makeText(MainActivity.this,&quot;已授权&quot;,Toast.LENGTH_LONG).show();}break;}}//第一次弹出申请privatevoidshowDialog(){AlertDialogdialog=newAlertDialog.Builder(this).setMessage(&quot;未授予本程序运行所需的权限，请去设置内授予&quot;).setPositiveButton(&quot;好&quot;,newDialogInterface.OnClickListener(){@OverridepublicvoidonClick(DialogInterfacedialog,intwhich){dialog.dismiss();goToAppSetting();}}).setNegativeButton(&quot;取消&quot;,newDialogInterface.OnClickListener(){@OverridepublicvoidonClick(DialogInterfacedialog,intwhich){dialog.dismiss();}}).setCancelable(false).show();}//如果第一次申请失败privatevoidgoToAppSetting(){Intentintent=newIntent();intent.setAction(Settings.ACTION_APPLICATION_DETAILS_SETTINGS);Uriuri=Uri.fromParts(&quot;package&quot;,getPackageName(),null);intent.setData(uri);startActivity(intent);}//跳转到当前应用的设置界面（手工给予）最后在setContentView()后面调用getRequestPermission()即可@OverrideprotectedvoidonCreate(BundlesavedInstanceState){super.onCreate(savedInstanceState);setContentView(R.layout.first_activity);//获取需要的权限getRequestPermission();}","link":"https://note.teio.tk/-Iv7hAbF0/"}]}